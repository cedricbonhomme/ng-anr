<md-dialog md-theme="light" class="dialog-width">
    <form name="importSoaForm">
        <md-toolbar>
            <div class="md-toolbar-tools">
                <h2 translate>Import a statement of applicability (SOA)</h2>
                <span flex></span>
                <md-button class="md-icon-button" ng-click="cancel()">
                    <md-icon aria-label="{{ 'Close dialog' | translate }}">close</md-icon>
                </md-button>
            </div>
        </md-toolbar>
        <md-dialog-content>
            <div class="md-dialog-content">
              <md-card class="md-card-info">
                  <md-card-content>
                      <p translate>A SOA can be completed from another one that is in the same risk analysis.<p>
                      <h4 translate>Before importing</h4>
                      <li translate>Match the controls between the two referentials on knowledge base (Referentials Tab)</li>
                      <li translate>Take a snapshot of risk analysis if necessary.</li>
                      <h4 translate>Import Options</h4>
                      <p translate>You can select which fields of the SOA you want to import.</p>
                      <p translate>If there is a multiple matching:</p>
                      <li translate>The information of each control will be appended.</li>
                      <li translate>For level of compliance, you can choose import mode calculation. (Average or worse level)</li>
                  </md-card-content>
              </md-card>
              <div layout="row" class="md-block">
                <div flex class="md-padding-right">
                <md-subheader class="md-subheader">{{ 'From referential' | translate }}</md-subheader>
                <md-select ng-model="importSoa.refSelected" placeholder="{{ 'Select a referential' | translate }}" required>
                  <md-option ng-repeat="ref in referentials" ng-value="ref.uuid" ng-if="ref.uuid != referential">
                    {{ _langField(ref,'label') }}
                  </md-option>
                </md-select>
                </div>
                <div layout="column" class="md-block md-padding-left">
                    <md-subheader class="md-subheader">{{ 'Import Options' | translate }}</md-subheader>
                    <div layout="row">
                        <div>
                          <md-switch ng-model="importSoa.justification">{{ 'Inclusion/Exclusion' | translate }}</md-switch>
                          <md-switch ng-model="importSoa.remarks">{{ 'Remarks' | translate }}</md-switch>
                        </div>
                        <div>
                          <md-switch ng-model="importSoa.evidences">{{ 'Evidences' | translate }}</md-switch>
                          <md-switch ng-model="importSoa.actions">{{ 'Actions' | translate }}</md-switch>
                        </div>
                        <div>
                          <md-switch ng-model="importSoa.compliance" style="margin-bottom: 8px">{{ 'Level of compliance' | translate }}</md-switch>
                          <md-radio-group ng-if="importSoa.compliance" ng-model="importSoa.calcul">
                              <md-radio-button value="average" class="radio-button-compliance">{{ 'Average of levels' | translate }}</md-radio-button>
                              <md-radio-button value="worse" class="radio-button-compliance">{{ 'Worse level' | translate }}</md-radio-button>
                          </md-radio-group>
                        </div>
                    </div>
                </div>
              </div>
            </div>
        </md-dialog-content>
        <md-dialog-actions layout="row">
            <span flex></span>
            <md-button ng-click="cancel()">
                {{ 'Cancel' | translate }}
            </md-button>
            <md-button ng-click="create()" ng-disabled="importSoaForm.$error.required" type="submit" class="md-accent md-hue-3">
                {{ 'Import' | translate }}
            </md-button>
        </md-dialog-actions>
    </form>
</md-dialog>
