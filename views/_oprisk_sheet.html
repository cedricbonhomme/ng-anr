<div class="md-padding-left md-padding-right">
    <h3 layout="row" layout-align="start center"><md-button class="md-icon-button" ng-click="resetOpSheet()"><md-icon>arrow_back</md-icon></md-button> <span translate>Operational risk sheet</span> - {{ opsheet_risk[_langField('label')] }}</h3>
    <table class="md-html-table" editable callback="changeRiskOp">
        <tbody>
        <tr>
            <th></th>
            <th translate>Prob.</th>
            <th>R</th>
            <th>O</th>
            <th>L</th>
            <th>F</th>
            <th>P</th>
            <th translate>Calculated risk</th>
        </tr>

        <tr>
            <th translate>NET</th>
            <td>{{ opsheet_risk.netProb }}</td>
            <td>{{ opsheet_risk.netR }}</td>
            <td>{{ opsheet_risk.netO }}</td>
            <td>{{ opsheet_risk.netL }}</td>
            <td>{{ opsheet_risk.netF }}</td>
            <td>{{ opsheet_risk.netP }}</td>
            <td class="tbl-risk-calc" ng-class="{'green': opsheet_risk.cacheNetRisk > 0 && opsheet_risk.cacheNetRisk < thresholds.rolf_thresholds.min, 'orange': opsheet_risk.cacheNetRisk >= thresholds.rolf_thresholds.min && opsheet_risk.cacheNetRisk < thresholds.rolf_thresholds.max, 'red': opsheet_risk.cacheNetRisk >= thresholds.rolf_thresholds.max}">{{ opsheet_risk.cacheNetRisk }}</td>
        </tr>

        <tr edit-model="opsheet_risk">
            <th translate>Target</th>
            <td class="small" edit-readonly="isAnrReadOnly" edit-field="targetedProb"></td>
            <td class="small" edit-readonly="isAnrReadOnly" edit-field="targetedR"></td>
            <td class="small" edit-readonly="isAnrReadOnly" edit-field="targetedO"></td>
            <td class="small" edit-readonly="isAnrReadOnly" edit-field="targetedL"></td>
            <td class="small" edit-readonly="isAnrReadOnly" edit-field="targetedF"></td>
            <td class="small" edit-readonly="isAnrReadOnly" edit-field="targetedP"></td>
            <td class="tbl-risk-calc" ng-class="{'green': opsheet_risk.cacheTargetedRisk > 0 && opsheet_risk.cacheTargetedRisk < thresholds.rolf_thresholds.min, 'orange': opsheet_risk.cacheTargetedRisk >= thresholds.rolf_thresholds.min && opsheet_risk.cacheTargetedRisk < thresholds.rolf_thresholds.max, 'red': opsheet_risk.cacheTargetedRisk >= thresholds.rolf_thresholds.max}">{{ opsheet_risk.cacheTargetedRisk }}</td>
        </tr>
        </tbody>
    </table>

    <form class="md-padding">
        <md-input-container class="md-block">
            <label translate>Observation</label>
            <md-icon>visibility</md-icon>
            <textarea ng-model="opsheet_risk.comment" ng-disabled="isAnrReadOnly" rows="3"></textarea>
        </md-input-container>
        <md-input-container class="md-block">
            <label translate>Processing type</label>
            <md-icon>widgets</md-icon>
            <md-select ng-model="opsheet_risk.kindOfMeasure" ng-disabled="isAnrReadOnly">
                <md-option ng-value="5">{{ 'Not processed' | translate }}</md-option>
                <md-option ng-value="1">{{ 'Reduction' | translate }}</md-option>
                <md-option ng-value="2">{{ 'Denied' | translate }}</md-option>
                <md-option ng-value="3">{{ 'Accepted' | translate }}</md-option>
                <md-option ng-value="4">{{ 'Shared' | translate }}</md-option>
            </md-select>
        </md-input-container>

        <div layout="row" layout-align="end center">
            <md-button class="md-raised md-primary" ng-disabled="isAnrReadOnly" ng-click="saveOpRiskSheet(opsheet_risk)">{{ 'Save changes' | translate }}</md-button>
        </div>
    </form>

    <ng-include ng-if="OFFICE_MODE == 'FO'" monarc-mode="operational" ng-controller="RiskRecommendationPartialCtrl" src="'/views/anr/_risk_rec_form.html'"></ng-include>
</div>
